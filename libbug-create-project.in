#!/usr/bin/env sh

PROJECTNAME=$1
VERSION=$2
AUTHOR=$3


display_usage() {
	echo "libbug-create-project requires 3 arguments."
	echo "\nUsage:\nlibbug-create-project project-name initial-version-number author \n"
	echo "Example:\nlibbug-create-project myproj 0.0.1 \"John Doe <john@doe.com>\""
	}

# if less than three arguments supplied, display usage
if [  $# -le 2 ]
then
	display_usage
	exit 1
fi


cp -r @prefix@/share/libbug/demo/ $PROJECTNAME

cd $PROJECTNAME
find . -type f -iname '*' | xargs sed -i -e "s/bug-demo/$PROJECTNAME/g"
find . -type f -iname '*' | xargs sed -i -e "s/0.0.1/$VERSION/g"
find . -type f -iname '*' | xargs sed -i -e "s/William Emerison Six <billsix@gmail.com>/$AUTHOR/g"

mv src/bug-demo.bug.scm src/$PROJECTNAME.bug.scm

